import{a as Y}from"./chunk-IVYJ7RYW.js";import{a as G}from"./chunk-VHRLFIFT.js";import"./chunk-RO3PRQET.js";import"./chunk-TF2KOS4Q.js";import"./chunk-B646OTCI.js";import"./chunk-7JSI5SCB.js";import"./chunk-Z3CHXUHI.js";import"./chunk-HC6MZPB3.js";import"./chunk-IP3IRUG3.js";import"./chunk-FYKNTBE2.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-OFKYDT3Y.js";import"./chunk-SJBLRW5X.js";import{a as H}from"./chunk-4EICRDDQ.js";import"./chunk-CARB67EU.js";import"./chunk-XXKETIBL.js";import"./chunk-GNOVVPTF.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-JFFBAPXU.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-O5PN56JD.js";import"./chunk-P4K7NQPT.js";import"./chunk-BL7BDUKV.js";import{$ as _,Aa as D,B as b,Ca as z,H as f,I as m,Ia as $,Ja as V,R as k,S as o,Sa as N,Ta as j,Va as B,X as P,Xa as L,a as S,ab as q,bb as A,ca as d,ea as M,fa as F,ha as s,ia as a,ja as g,ka as T,l as h,la as U,n as x,na as O,o as y,oa as u,pa as p,r as R,s as w,sa as I,t as E,v as C,ya as l,za as v}from"./chunk-J7TXCJLH.js";import"./chunk-CTXH4QH2.js";import"./chunk-A4HHE4W2.js";import"./chunk-LFRXSQAQ.js";import"./chunk-GK6EN35L.js";import"./chunk-II53MLED.js";import"./chunk-RUL3GU37.js";import"./chunk-WTCPO44B.js";import"./chunk-SV7S5NYR.js";import"./chunk-OLRFWS6T.js";var J=(()=>{let r=class r{constructor(){this.iconClass="",this.text=""}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=P({type:r,selectors:[["app-info-item"]],inputs:{iconClass:"iconClass",text:"text"},decls:4,vars:4,consts:[[1,"info-item-container"],[1,"info-item-text"]],template:function(t,c){t&1&&(s(0,"div",0),g(1,"i"),s(2,"span",1),l(3),a()()),t&2&&(o(),F(c.iconClass),o(2),v(c.text))},styles:[".info-item-container[_ngcontent-%COMP%]{display:flex;align-items:center}i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1rem;color:#ad2f33}.info-item-text[_ngcontent-%COMP%]{font-size:1rem}"]});let n=r;return n})();function W(n,r){n&1&&(s(0,"div",10)(1,"p"),l(2,"Carregando receita..."),a()())}function X(n,r){if(n&1){let i=O();s(0,"div",11)(1,"p"),l(2),a(),s(3,"button",12),u("click",function(){f(i);let t=p(2);return m(t.loadRecipeDetails())}),l(4,"Tentar novamente"),a()()}if(n&2){let i=p(2);o(2),D("Ocorreu um erro: ",i.error,"")}}function Z(n,r){if(n&1&&(s(0,"div",30)(1,"p"),l(2),a()()),n&2){let i=p(2).ngIf;o(2),v(i.recipe==null?null:i.recipe.description)}}function ee(n,r){n&1&&(s(0,"li"),l(1," Nenhum ingrediente adicionado. "),a())}function te(n,r){if(n&1&&(s(0,"li"),l(1),a()),n&2){let i=r.$implicit;o(),z(" ",i.quantity," ",i.unitLabel," de ",i.name," ")}}function ie(n,r){if(n&1&&(s(0,"div",31)(1,"ul"),_(2,ee,2,0,"li",6)(3,te,2,3,"li",32),a()()),n&2){let i=p(2).ngIf;o(2),d("ngIf",!i.recipe.ingredients||i.recipe.ingredients.length===0),o(),d("ngForOf",i.recipe.ingredients)}}function ne(n,r){n&1&&(s(0,"li"),l(1," Nenhum modo de preparo detalhado. "),a())}function oe(n,r){if(n&1&&(s(0,"li"),l(1),a()),n&2){let i=r.$implicit;o(),v(i)}}function re(n,r){if(n&1&&(s(0,"div",33)(1,"ol"),_(2,ne,2,0,"li",6)(3,oe,2,1,"li",32),a()()),n&2){let i=p(2).ngIf;o(2),d("ngIf",!i.recipe.preparationSteps||i.recipe.preparationSteps.length===0),o(),d("ngForOf",i.recipe.preparationSteps)}}function ae(n,r){if(n&1){let i=O();s(0,"div",34)(1,"button",35),u("click",function(){f(i);let t=p(2).ngIf,c=p();return m(c.editRecipe(t.id))}),g(2,"i",36),l(3," Editar Receita "),a(),s(4,"button",37),u("click",function(){f(i);let t=p(2).ngIf,c=p();return m(c.deleteRecipe(t.id))}),g(5,"i",38),l(6," Excluir Receita "),a()()}}function ce(n,r){if(n&1){let i=O();s(0,"div",13)(1,"div",14),g(2,"img",15),a(),s(3,"div",16)(4,"div",17)(5,"div",18)(6,"h2"),l(7),a(),s(8,"h3"),l(9),a()(),s(10,"div",19)(11,"button",12),u("click",function(){f(i);let t=p(2);return m(t.toggleFavorite())}),g(12,"i",20),a()()(),s(13,"div",21),g(14,"app-info-item",22)(15,"app-info-item",23)(16,"app-info-item",24),a(),_(17,Z,3,1,"div",25),s(18,"div",26)(19,"button",12),u("click",function(){f(i);let t=p(2);return m(t.toggleContent("ingredients"))}),l(20," Ingredientes "),a(),s(21,"button",12),u("click",function(){f(i);let t=p(2);return m(t.toggleContent("preparation"))}),l(22," Modo de Preparo "),a()(),_(23,ie,4,2,"div",27)(24,re,4,2,"div",28),a(),_(25,ae,7,0,"div",29),a()}if(n&2){let i=p().ngIf,e=p();o(2),d("src",(i.recipe==null?null:i.recipe.photoUrl)||"assets/placeholder.png",k)("alt",i.recipe==null?null:i.recipe.recipeName),o(5),v(i.recipe==null?null:i.recipe.recipeName),o(2),D("Feito por ",i.recipe==null?null:i.recipe.userName,""),o(3),M("bi-heart-fill",e.isFavorite)("bi-heart",!e.isFavorite),o(2),I("text",i.recipe==null?null:i.recipe.categoryLabel),o(),I("text",i.recipe==null?null:i.recipe.timeLabel),o(),I("text",i.recipe==null?null:i.recipe.difficultyLabel),o(),d("ngIf",i.recipe==null?null:i.recipe.description),o(2),M("active",e.showIngredients),o(2),M("active",!e.showIngredients),o(2),d("ngIf",e.showIngredients),o(),d("ngIf",!e.showIngredients),o(),d("ngIf",e.loggedInUserUid&&(i.recipe==null?null:i.recipe.userId)===e.loggedInUserUid)}}function se(n,r){if(n&1&&(T(0),_(1,W,3,0,"div",7)(2,X,5,1,"div",8)(3,ce,26,19,"div",9),U()),n&2){let i=r.ngIf,e=p();o(),d("ngIf",e.loading),o(),d("ngIf",e.error),o(),d("ngIf",!e.loading&&!e.error&&i)}}var Ce=(()=>{let r=class r{constructor(){this.receita$=h(void 0),this.receitaId=null,this.loading=!0,this.error=null,this.isFavorite=!1,this.showIngredients=!0,this.loggedInUserUid=null,this.route=b(q),this.receitaService=b(Y),this.router=b(A),this.authService=b(H),this.subscriptions=new S}ngOnInit(){this.subscriptions.add(this.authService.authState.subscribe(e=>{this.loggedInUserUid=e?e.uid:null,console.log("ReceitaDetalhePage: UID do usu\xE1rio logado:",this.loggedInUserUid),this.receitaId&&this.loadRecipeDetails()})),this.subscriptions.add(this.route.paramMap.pipe(x(e=>e.get("id")),C(e=>{this.receitaId=e,e||(this.error="ID da receita n\xE3o fornecido.",this.loading=!1)}),R(e=>!!e),E(e=>(this.loading=!0,this.error=null,y([this.receitaService.buscarReceitaPorIdComDetalhes(e),this.authService.authState.pipe(x(t=>t==null?void 0:t.uid))]).pipe(C(([t,c])=>{this.loading=!1,t?c&&t.id?this.receitaService.isRecipeFavorite(c,t.id).subscribe(K=>{this.isFavorite=K}):this.isFavorite=!1:this.error="Receita n\xE3o encontrada ou dados inv\xE1lidos."}),x(([t,c])=>t),w(t=>{console.error("Erro ao carregar detalhes da receita:",t);let c="N\xE3o foi poss\xEDvel carregar os detalhes da receita.";return t instanceof Error?c+=` Detalhes: ${t.message}`:typeof t=="object"&&t!==null&&"message"in t?c+=` Detalhes: ${t.message}`:typeof t=="string"&&(c+=` Detalhes: ${t}`),this.error=c,this.loading=!1,h(void 0)}))))).subscribe(e=>{this.receita$=h(e)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadRecipeDetails(){this.receitaId&&(this.loading=!0,this.error=null,this.subscriptions.add(y([this.receitaService.buscarReceitaPorIdComDetalhes(this.receitaId),this.authService.authState.pipe(x(e=>e==null?void 0:e.uid))]).pipe(C(([e,t])=>{this.loading=!1,e?t&&e.id?this.receitaService.isRecipeFavorite(t,e.id).subscribe(c=>{this.isFavorite=c}):this.isFavorite=!1:this.error="Receita n\xE3o encontrada ou dados inv\xE1lidos."}),x(([e,t])=>e),w(e=>{console.error("Erro ao recarregar detalhes da receita:",e);let t="N\xE3o foi poss\xEDvel recarregar os detalhes da receita.";return e instanceof Error?t+=` Detalhes: ${e.message}`:typeof e=="object"&&e!==null&&"message"in e?t+=` Detalhes: ${e.message}`:typeof e=="string"&&(t+=` Detalhes: ${e}`),this.error=t,this.loading=!1,h(void 0)})).subscribe(e=>{this.receita$=h(e)})))}toggleFavorite(){if(!this.loggedInUserUid||!this.receitaId){console.warn("Usu\xE1rio n\xE3o logado ou ID da receita n\xE3o dispon\xEDvel para alternar favorito.");return}this.receitaService.toggleFavoriteRecipe(this.loggedInUserUid,this.receitaId,this.isFavorite).subscribe({next:()=>{this.isFavorite=!this.isFavorite,console.log(`Receita ${this.receitaId} agora \xE9 favorita:`,this.isFavorite)},error:e=>{console.error("Erro ao alternar favorito:",e)}})}editRecipe(e){console.log("Navegando para editar receita:",e),this.router.navigate(["/recipe-creation",e])}deleteRecipe(e){console.log("Deletar receita:",e),confirm("Tem certeza que deseja deletar esta receita?")&&this.receitaService.deleteRecipe(e).subscribe({next:()=>{console.log("Receita deletada com sucesso!"),this.router.navigate(["/feed"])},error:t=>{console.error("Erro ao deletar receita:",t);let c="Erro desconhecido ao deletar a receita.";t instanceof Error?c+=` Detalhes: ${t.message}`:typeof t=="object"&&t!==null&&"message"in t?c+=` Detalhes: ${t.message}`:typeof t=="string"&&(c+=` Detalhes: ${t}`),this.error=c}})}toggleContent(e){this.showIngredients=e==="ingredients"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=P({type:r,selectors:[["app-receita-detalhe"]],decls:8,vars:4,consts:[[1,"receita-detalhe-page-wrapper"],[1,"page-content-scrollable"],[1,"content"],[1,"main-recipe-display"],[1,"page-header-container-custom"],["title","Detalhes Da Receita","backButtonRoute","/feed",3,"showBackButton"],[4,"ngIf"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","recipe-container",4,"ngIf"],[1,"loading-state"],[1,"error-state"],[3,"click"],[1,"recipe-container"],[1,"recipe-image-container"],[3,"src","alt"],[1,"recipe-details-content"],[1,"recipe-header"],[1,"info"],[1,"actions"],[1,"bi"],[1,"specifications"],["iconClass","bi bi-bookmark",3,"text"],["iconClass","bi bi-clock",3,"text"],["iconClass","bi bi-graph-up",3,"text"],["class","description",4,"ngIf"],[1,"recipe-content-toggle"],["class","recipe-ingredients",4,"ngIf"],["class","recipe-preparation",4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"description"],[1,"recipe-ingredients"],[4,"ngFor","ngForOf"],[1,"recipe-preparation"],[1,"action-buttons"],[1,"action-button","primary-button",3,"click"],[1,"bi","bi-pencil-square"],[1,"action-button","danger-button",3,"click"],[1,"bi","bi-trash"]],template:function(t,c){t&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),g(5,"app-page-header",5),a(),_(6,se,4,3,"ng-container",6),$(7,"async"),a()()()()),t&2&&(o(5),d("showBackButton",!0),o(),d("ngIf",V(7,2,c.receita$)))},dependencies:[L,N,j,B,G,J],styles:['@charset "UTF-8";.receita-detalhe-page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:#111;color:#f0f0f0;overflow:hidden}.page-content-scrollable[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0}.content[_ngcontent-%COMP%]{width:85%;margin:0 auto;padding:20px 0}.main-recipe-display[_ngcontent-%COMP%]{width:90%;margin:0 auto}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#f0dbbe;width:100%;margin:0 auto;box-sizing:border-box}.error-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ad2f33;color:#fff;padding:10px 15px;border-radius:8px;border:none;cursor:pointer;margin-top:10px}.recipe-container[_ngcontent-%COMP%]{width:100%;margin:0 auto}.recipe-image-container[_ngcontent-%COMP%]{width:100%;height:25vh;border-radius:14px;overflow:hidden;margin-bottom:16px;margin-top:10%}.recipe-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover}.recipe-details-content[_ngcontent-%COMP%]{padding:16px 0}.recipe-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.recipe-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.recipe-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1d1d19;padding:15px;border-radius:50%;border:none;outline:none;cursor:pointer;display:flex;align-items:center;justify-content:center}.recipe-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ad2f33;font-size:22px}.recipe-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f0dbbe;font-size:22px;margin-bottom:0;margin-top:0}.recipe-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f0f0f0;font-size:16px;margin-top:5px}.description[_ngcontent-%COMP%]{margin-bottom:40px}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;color:#f0f0f0}.specifications[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:25px;margin:8% 0}.recipe-content-toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-top:25px;margin-bottom:20px;width:100%;gap:10px}.recipe-content-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background-color:#1d1d19;padding:15px 20px;border-radius:8px;font-size:16px;color:#f0f0f0;border:none;cursor:pointer;transition:background-color .3s ease}.recipe-content-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#67161f}.recipe-preparation[_ngcontent-%COMP%]{margin-top:20px}.recipe-preparation[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;counter-reset:step-counter}.recipe-preparation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#1d1d19;padding:12px 15px 12px 60px;border-radius:8px;margin-bottom:20px;color:#f0f0f0;font-size:.95em;position:relative}.recipe-preparation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{counter-increment:step-counter;content:counter(step-counter) ".";position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#f0dbbe;font-size:14px;min-width:25px;text-align:right}.recipe-preparation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.recipe-preparation[_ngcontent-%COMP%]   li[ngIf*="receitaData.recipe.preparationSteps"][_ngcontent-%COMP%]{list-style:none;margin-bottom:0;padding-left:15px}.recipe-preparation[_ngcontent-%COMP%]   li[ngIf*="receitaData.recipe.preparationSteps"][_ngcontent-%COMP%]:before{content:""}.recipe-ingredients[_ngcontent-%COMP%]{margin-top:20px}.recipe-ingredients[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.recipe-ingredients[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#1d1d19;padding:12px 15px;border-radius:8px;margin-bottom:8px;color:#f0f0f0;font-size:.95em}.action-buttons[_ngcontent-%COMP%]{display:flex;margin-top:30px;align-items:center;gap:10px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background-color:#ad2f33;padding:12px 20px;border-radius:8px;font-size:14px;color:#f0f0f0;border:none;cursor:pointer}@media (max-width: 768px){.content[_ngcontent-%COMP%]{width:95%;padding:15px 0}.recipe-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.recipe-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.recipe-content-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:12px 15px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:95%}}']});let n=r;return n})();export{Ce as ReceitaDetalhePage};
