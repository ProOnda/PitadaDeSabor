import{a as N,b as D}from"./chunk-3Z73RA4N.js";import{a as L}from"./chunk-4EICRDDQ.js";import{a as z}from"./chunk-5F6GEKNM.js";import{a as T}from"./chunk-UZG4YI3I.js";import{f as U,i as j,k as q,r as B}from"./chunk-O5PN56JD.js";import"./chunk-P4K7NQPT.js";import"./chunk-BL7BDUKV.js";import{c as F}from"./chunk-3HB2GM6U.js";import{$ as b,B as u,Db as I,Fb as k,Ra as S,S as i,Ta as x,V as h,X as C,Xa as v,bb as P,ca as a,eb as y,ha as o,ia as t,ja as l,oa as g,ob as m,pa as _,rb as O,tb as w,vb as E,ya as d,za as M}from"./chunk-J7TXCJLH.js";import"./chunk-CTXH4QH2.js";import"./chunk-A4HHE4W2.js";import"./chunk-LFRXSQAQ.js";import"./chunk-GK6EN35L.js";import"./chunk-25Z7UPBE.js";import"./chunk-4U6PRYVA.js";import"./chunk-II53MLED.js";import"./chunk-RUL3GU37.js";import"./chunk-WTCPO44B.js";import"./chunk-IOUSJTJ3.js";import"./chunk-SV7S5NYR.js";import{g as f}from"./chunk-OLRFWS6T.js";function G(p,c){if(p&1&&(o(0,"div",18),d(1),t()),p&2){let R=_();i(),M(R.errorMessage)}}var ie=(()=>{let c=class c{constructor(s){this.formBuilder=s,this.errorMessage="",this.exibirSenha=!1,this.senhaInputType="password",this.exibirConfirmarSenha=!1,this.confirmarSenhaInputType="password",this.firestore=u(U),this.authService=u(L),this.router=u(P),this.cadastroForm=this.formBuilder.group({nome:["",m.required],email:["",[m.required,m.email]],senha:["",m.required],confirmarSenha:["",m.required]},{validator:this.passwordMatchValidator})}ngOnInit(){}passwordMatchValidator(s){let r=s.get("senha"),e=s.get("confirmarSenha");return!r||!e||e.value===""?null:r.value!==e.value?{senhasNaoCoincidem:!0}:null}toggleSenha(){this.exibirSenha=!this.exibirSenha,this.senhaInputType=this.exibirSenha?"text":"password"}toggleConfirmarSenha(){this.exibirConfirmarSenha=!this.exibirConfirmarSenha,this.confirmarSenhaInputType=this.exibirConfirmarSenha?"text":"password"}cadastrarUsuario(){return f(this,null,function*(){if(this.cadastroForm.valid){let{nome:s,email:r,senha:e}=this.cadastroForm.value;try{let n=yield this.authService.registerUser(r,e,s);if(console.log("Cadastro no Auth realizado com sucesso!",n),n!=null&&n.uid){let V=j(this.firestore,"users"),A=q(V,n.uid);yield B(A,{user_name:s,email:r,photo:""}),console.log("Dados do usu\xE1rio salvos no Firestore!"),this.router.navigate(["/feed"])}else this.errorMessage="Erro ao obter UID do usu\xE1rio.",console.error("Erro ao obter UID do usu\xE1rio.")}catch(n){console.error("Erro ao cadastrar usu\xE1rio:",n),this.errorMessage=n.message||"Erro ao realizar o cadastro.",n.code==="auth/email-already-in-use"&&(this.errorMessage="Este email j\xE1 est\xE1 cadastrado.")}}else this.errorMessage="Por favor, preencha todos os campos corretamente."})}};c.\u0275fac=function(r){return new(r||c)(h(I))},c.\u0275cmp=C({type:c,selectors:[["app-cadastro"]],decls:29,vars:9,consts:[[1,"cadastro-page",3,"fullscreen"],[1,"cadastro-container"],[1,"cadastro-header"],[3,"ngSubmit","formGroup"],["label","Nome e sobrenome","controlName","nome"],[1,"bi","bi-person-fill"],["label","Email","controlName","email"],[1,"bi","bi-envelope-fill"],[1,"password-input-container"],["label","Senha","controlName","senha",3,"type"],[1,"bi","bi-lock-fill"],["type","button",1,"toggle-password-button",3,"click"],[3,"ngClass"],["label","Confirmar Senha","controlName","confirmarSenha",3,"type"],["class","error-message",4,"ngIf"],["type","submit",3,"label"],[1,"separator"],[3,"isLoginPage"],[1,"error-message"]],template:function(r,e){r&1&&(o(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1"),d(4,"Crie sua conta e junte-se \xE0 nossa comunidade!"),t(),o(5,"p"),d(6,"Compartilhe suas experi\xEAncias e descubra um mundo de sabores conosco."),t()(),o(7,"form",3),g("ngSubmit",function(){return e.cadastrarUsuario()}),o(8,"app-custom-input",4),l(9,"i",5),t(),o(10,"app-custom-input",6),l(11,"i",7),t(),o(12,"div",8)(13,"app-custom-input",9),l(14,"i",10),t(),o(15,"button",11),g("click",function(){return e.toggleSenha()}),l(16,"i",12),t()(),o(17,"div",8)(18,"app-custom-input",13),l(19,"i",10),t(),o(20,"button",11),g("click",function(){return e.toggleConfirmarSenha()}),l(21,"i",12),t()(),b(22,G,2,1,"div",14),l(23,"app-button",15),t(),o(24,"div",16)(25,"span"),d(26,"Ou"),t()(),l(27,"app-social-login")(28,"app-footer-link",17),t()()),r&2&&(a("fullscreen",!0),i(7),a("formGroup",e.cadastroForm),i(6),a("type",e.senhaInputType),i(3),a("ngClass",e.exibirSenha?"bi bi-eye-slash-fill":"bi bi-eye-fill"),i(2),a("type",e.confirmarSenhaInputType),i(3),a("ngClass",e.exibirConfirmarSenha?"bi bi-eye-slash-fill":"bi bi-eye-fill"),i(),a("ngIf",e.errorMessage),i(),a("label","Cadastrar"),i(5),a("isLoginPage",!1))},dependencies:[v,S,x,F,y,k,w,O,E,z,T,N,D],styles:['@charset "UTF-8";.cadastro-page[_ngcontent-%COMP%]{--background: #111;height:100%;margin:0 auto}.cadastro-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:300px;margin:10px auto}.cadastro-header[_ngcontent-%COMP%]{color:#f0f0f0;text-align:center;margin:20px 0}.cadastro-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;color:#f0dbbe;margin-bottom:10px}.cadastro-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#f0f0f0;line-height:1.4}.cadastro-button[_ngcontent-%COMP%]{--background: #ad2f33;--color: #fff;border-radius:8px;height:50px;width:100%;margin-bottom:20px}.separator[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;text-align:center;color:#777;margin:20px 0}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex-grow:1;background-color:#777;height:1px;margin:0 10px}.separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 10px}app-social-login[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}app-footer-link[_ngcontent-%COMP%]{width:100%}.cadastro-container[_ngcontent-%COMP%]   app-custom-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);font-size:1.2em;color:#777}.cadastro-container[_ngcontent-%COMP%]   app-custom-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px;color:#777}.password-input-container[_ngcontent-%COMP%]{position:relative}.toggle-password-button[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);background:none;border:none;padding:0;cursor:pointer;font-size:1.2em;color:#ad2f33}.cadastro-container[_ngcontent-%COMP%]   app-custom-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px;padding-right:40px}.error-message[_ngcontent-%COMP%]{color:#f0f0f0;margin-top:20px}']});let p=c;return p})();export{ie as CadastroPage};
