import{a as q}from"./chunk-NXAUS6XO.js";import{a as L}from"./chunk-AKOWJJL3.js";import{a as A}from"./chunk-IVYJ7RYW.js";import{a as B}from"./chunk-TJ4WWLIQ.js";import"./chunk-RO3PRQET.js";import"./chunk-TF2KOS4Q.js";import"./chunk-B646OTCI.js";import"./chunk-7JSI5SCB.js";import"./chunk-Z3CHXUHI.js";import"./chunk-HC6MZPB3.js";import"./chunk-IP3IRUG3.js";import"./chunk-FYKNTBE2.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-OFKYDT3Y.js";import"./chunk-SJBLRW5X.js";import{a as $}from"./chunk-4EICRDDQ.js";import"./chunk-CARB67EU.js";import"./chunk-XXKETIBL.js";import"./chunk-GNOVVPTF.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-JFFBAPXU.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-O5PN56JD.js";import"./chunk-P4K7NQPT.js";import"./chunk-BL7BDUKV.js";import"./chunk-3HB2GM6U.js";import{$ as M,Aa as z,B as P,Ba as U,Eb as j,H as w,I as k,N as _,R as S,S as c,Sa as D,Ta as R,X as f,Xa as u,bb as N,ca as p,ha as r,ia as a,ja as l,l as b,na as F,oa as s,pa as C,q as O,qa as I,ra as E,s as x,t as y,v,ya as h,za as T}from"./chunk-J7TXCJLH.js";import"./chunk-CTXH4QH2.js";import"./chunk-A4HHE4W2.js";import"./chunk-LFRXSQAQ.js";import"./chunk-GK6EN35L.js";import"./chunk-25Z7UPBE.js";import"./chunk-4U6PRYVA.js";import"./chunk-II53MLED.js";import"./chunk-RUL3GU37.js";import"./chunk-WTCPO44B.js";import"./chunk-IOUSJTJ3.js";import"./chunk-SV7S5NYR.js";import"./chunk-OLRFWS6T.js";var H=(()=>{let i=class i{constructor(){this.searchChange=new _,this.filterClick=new _}onSearchChange(t){let e=t.target.value;this.searchChange.emit(e)}onFilterClick(){this.filterClick.emit()}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=f({type:i,selectors:[["app-search-bar"]],outputs:{searchChange:"searchChange",filterClick:"filterClick"},decls:6,vars:0,consts:[[1,"search-bar-container"],[1,"input-background"],[1,"bi","bi-search","search-icon"],["type","text","placeholder","Procurar...",1,"search-input",3,"input"],[1,"filter-button",3,"click"],[1,"bi","bi-sliders","filter-icon"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1),l(2,"i",2),r(3,"input",3),s("input",function(d){return o.onSearchChange(d)}),a()(),r(4,"div",4),s("click",function(){return o.onFilterClick()}),l(5,"i",5),a()())},dependencies:[u,j],styles:['@charset "UTF-8";.search-bar-container[_ngcontent-%COMP%]{width:90%;height:50px;position:relative;margin:10px auto}.input-background[_ngcontent-%COMP%]{width:100%;height:100%;background:#1d1d19;border-radius:14px;position:absolute;left:0;top:0}.search-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;padding-left:60px;padding-right:60px;border:none;color:#f0f0f0;font-size:14px;border-radius:14px;background:#1d1d19;display:flex;align-items:center}.search-input[_ngcontent-%COMP%]::placeholder{color:#777;font-size:14px;border:none}.search-icon[_ngcontent-%COMP%]{left:21px;top:16px;position:absolute;font-size:18px;color:#777;z-index:3}.filter-button[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0;top:0;background:#67161f;border-top-right-radius:14px;border-bottom-right-radius:14px;display:flex;justify-content:center;align-items:center;z-index:3}.filter-icon[_ngcontent-%COMP%]{font-size:18px;color:#ad2f33}']});let n=i;return n})();var G=["*"],Q=(()=>{let i=class i{constructor(){this.icon="",this.label="",this.categoryClick=new _}onCategoryClick(){this.categoryClick.emit(this.label)}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=f({type:i,selectors:[["app-category-item"]],inputs:{icon:"icon",label:"label"},outputs:{categoryClick:"categoryClick"},ngContentSelectors:G,decls:5,vars:1,consts:[[1,"category-item",3,"click"],[1,"icon-container"],[1,"label"]],template:function(e,o){e&1&&(I(),r(0,"div",0),s("click",function(){return o.onCategoryClick()}),r(1,"div",1),E(2),a(),r(3,"div",2),h(4),a()()),e&2&&(c(4),T(o.label))},dependencies:[u],styles:['@charset "UTF-8";.category-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;margin:10px auto;gap:5px}.icon-container[_ngcontent-%COMP%]{background-color:#67161f;width:50px;height:50px;border-radius:8px;display:flex;justify-content:center;align-items:center;margin-bottom:8px}.label[_ngcontent-%COMP%]{color:#f0f0f0;font-size:10px;width:60px;text-align:center;font-family:sans-serif}']});let n=i;return n})();function J(n,i){if(n&1&&l(0,"img",25),n&2){let g=C();p("src",g.userPhotoUrl,S)}}function K(n,i){n&1&&(r(0,"div",26),l(1,"i",27),a())}function W(n,i){n&1&&(r(0,"div",28),h(1,"Carregando receitas..."),a())}function X(n,i){if(n&1&&(r(0,"div",29),h(1),a()),n&2){let g=C();c(),z("Erro: ",g.error,"")}}function Y(n,i){n&1&&(r(0,"div"),h(1," Nenhuma receita encontrada. "),a())}function Z(n,i){if(n&1){let g=F();r(0,"app-receita-card-horizontal",32),s("click",function(){let e=w(g).$implicit,o=C(2);return k(o.openReceitaDetails(e.id))}),a()}if(n&2){let g=i.$implicit;p("receita",g)}}function ee(n,i){if(n&1&&(r(0,"div",30),M(1,Z,1,1,"app-receita-card-horizontal",31),a()),n&2){let g=C();c(),p("ngForOf",g.receitas)}}var ke=(()=>{let i=class i{constructor(){this.receitas=[],this.loading=!0,this.error=null,this.saudacao="",this.userName=null,this.userPhotoUrl=null,this.searchTerm="",this.allCategories=[],this.categoriesMap=new Map,this.receitaService=P(A),this.authService=P($),this.router=P(N)}ngOnInit(){this.carregarReceitas(),this.updateSaudacao(),this.loadUserData(),this.loadCategories(),this.timeSubscription=O(6e4).subscribe(()=>{this.updateSaudacao()})}ngOnDestroy(){this.timeSubscription&&this.timeSubscription.unsubscribe(),this.authSubscription&&this.authSubscription.unsubscribe()}updateSaudacao(){let e=new Date(Date.now()-108e5).getHours();e>=0&&e<12?this.saudacao="Bom dia":e>=12&&e<18?this.saudacao="Boa tarde":this.saudacao="Boa noite"}loadUserData(){this.authSubscription=this.authService.authState.pipe(y(t=>t?this.authService.getCurrentUserData(t.uid).pipe(v(e=>{e?(this.userName=e.user_name||e.displayName||t.email||"Usu\xE1rio",e.photoURL&&e.photoURL!=="https://placehold.co/100x100"&&e.photoURL!=="https://placehold.co/40x40"?this.userPhotoUrl=e.photoURL:this.userPhotoUrl=null):(this.userName=t.email||"Usu\xE1rio",this.userPhotoUrl=null)}),x(e=>(console.error("Erro ao carregar dados do usu\xE1rio:",e),this.userName=t.email||"Usu\xE1rio",this.userPhotoUrl=null,b(null)))):(this.userName="Usu\xE1rio",this.userPhotoUrl=null,b(null)))).subscribe()}loadCategories(){this.receitaService.getAllCategories().subscribe({next:t=>{this.allCategories=t,this.categoriesMap.clear(),t.forEach(e=>this.categoriesMap.set(e.label,e.id)),console.log("Categorias carregadas:",this.allCategories)},error:t=>{console.error("Erro ao carregar categorias:",t)}})}carregarReceitas(){this.loading=!0,this.error=null,this.receitaService.getRecipes({recipeName:this.searchTerm}).subscribe({next:t=>{console.log("Dados das receitas carregados:",t),t.forEach(e=>{console.log("Item da receita:",e)}),this.receitas=t,this.loading=!1},error:t=>{console.error("Erro ao carregar receitas:",t);let e="N\xE3o foi poss\xEDvel carregar as receitas.";t instanceof Error?e+=` Detalhes: ${t.message}`:typeof t=="object"&&t!==null&&"message"in t?e+=` Detalhes: ${t.message}`:typeof t=="string"&&(e+=` Detalhes: ${t}`),this.error=e,this.loading=!1}})}handleSearchChange(t){this.searchTerm=t,this.carregarReceitas()}handleCategoryClick(t){console.log(`Categoria clicada: ${t}`);let e=this.categoriesMap.get(t);e?(console.log(`Navegando para CategoryFoodPage com ID: ${e}`),this.router.navigate(["/category-food",e])):(console.warn(`ID da categoria n\xE3o encontrada para o label: ${t}`),alert("Categoria n\xE3o encontrada."))}openReceitaDetails(t){console.log("Fun\xE7\xE3o openReceitaDetails chamada com ID:",t),this.router.navigate(["/receita-detalhe",t])}goToCreateRecipe(){this.router.navigate(["/criar-receita"])}goToFilterPage(){console.log("Navegando para a p\xE1gina de filtro..."),this.router.navigate(["/filter"])}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=f({type:i,selectors:[["app-feed"]],decls:29,vars:8,consts:[[1,"feed-page-wrapper"],[1,"page-content-scrollable"],[1,"feed-page-content"],[1,"header"],[1,"header-top-row"],[1,"home-text"],[1,"profile-image-container"],["alt","Foto de Perfil","class","profile-actual-image",3,"src",4,"ngIf"],["class","profile-placeholder-icon",4,"ngIf"],[1,"texts"],[1,"greeting"],[1,"question"],[3,"searchChange","filterClick"],[1,"categories-container"],["label","Lanches",3,"categoryClick"],[1,"bi","bi-cup-straw"],["label","Refei\xE7\xF5es",3,"categoryClick"],[1,"bi","bi-egg-fried"],["label","Sobremesas",3,"categoryClick"],[1,"bi","bi-cake"],["title","As Mais Recentes","iconClass","bi bi-plus-lg"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],["class","receitas-container",4,"ngIf"],["alt","Foto de Perfil",1,"profile-actual-image",3,"src"],[1,"profile-placeholder-icon"],[1,"bi","bi-image"],[1,"loading"],[1,"error"],[1,"receitas-container"],[3,"receita","click",4,"ngFor","ngForOf"],[3,"click","receita"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),h(6,"Home"),a(),r(7,"div",6),M(8,J,1,1,"img",7)(9,K,2,0,"div",8),a()(),r(10,"div",9)(11,"p",10),h(12),a(),r(13,"p",11),h(14,"Qual Vai Ser A Receita Do Dia?"),a()()(),r(15,"app-search-bar",12),s("searchChange",function(d){return o.handleSearchChange(d)})("filterClick",function(){return o.goToFilterPage()}),a(),r(16,"div",13)(17,"app-category-item",14),s("categoryClick",function(d){return o.handleCategoryClick(d)}),l(18,"i",15),a(),r(19,"app-category-item",16),s("categoryClick",function(d){return o.handleCategoryClick(d)}),l(20,"i",17),a(),r(21,"app-category-item",18),s("categoryClick",function(d){return o.handleCategoryClick(d)}),l(22,"i",19),a()(),l(23,"app-item-list-section",20),M(24,W,2,0,"div",21)(25,X,2,1,"div",22)(26,Y,2,0,"div",23)(27,ee,2,1,"div",24),l(28,"app-feed-menu"),a()()()),e&2&&(c(8),p("ngIf",o.userPhotoUrl),c(),p("ngIf",!o.userPhotoUrl),c(3),U("",o.saudacao,", ",o.userName||"Usu\xE1rio","!"),c(12),p("ngIf",o.loading),c(),p("ngIf",o.error),c(),p("ngIf",!o.loading&&!o.error&&o.receitas.length===0),c(),p("ngIf",!o.loading&&!o.error&&o.receitas.length>0))},dependencies:[u,D,R,H,B,Q,q,L],styles:['@charset "UTF-8";.feed-page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:#111;color:#f0f0f0;overflow:hidden}.page-content-scrollable[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0;margin:20px 0;scrollbar-width:none}.page-content-scrollable[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px;background:transparent}.feed-page-content[_ngcontent-%COMP%]{width:90%;margin:0 auto;padding-bottom:20px;box-sizing:border-box}.header[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px;background-color:#11110f;color:#f0f0f0}.header-top-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:10px}.home-text[_ngcontent-%COMP%]{color:#ad2f33;font-size:1.2em;font-weight:700;margin:0}.profile-image-container[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;overflow:hidden;background-color:#1d1d19;border:2px solid #AD2F33;box-shadow:0 2px 5px #0000004d;display:flex;justify-content:center;align-items:center}.profile-actual-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.profile-placeholder-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.profile-placeholder-icon[_ngcontent-%COMP%]   i.bi-image[_ngcontent-%COMP%]{font-size:20px;color:#404040}.texts[_ngcontent-%COMP%]{flex-grow:1;margin-left:0}.greeting[_ngcontent-%COMP%]{color:#f0dbbe;font-size:14px;text-align:left;font-family:sans-serif}.question[_ngcontent-%COMP%]{color:#f0dbbe;font-size:16px;text-align:left;font-family:sans-serif;font-weight:700}app-search-bar[_ngcontent-%COMP%]{margin:16px auto;width:100%;display:block}.categories-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin:20px auto;flex-wrap:wrap;gap:10px}.categories-container[_ngcontent-%COMP%]   app-category-item[_ngcontent-%COMP%]{flex:1;min-width:100px;text-align:center}.categories-container[_ngcontent-%COMP%]   app-category-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#ad2f33}app-item-list-section[_ngcontent-%COMP%]{width:100%;margin-top:30px;display:block}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-recipes-message[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#f0f0f0;width:100%;box-sizing:border-box}.receitas-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;width:100%;padding-top:20px}app-receita-card-horizontal[_ngcontent-%COMP%]{width:100%;display:block}app-feed-menu[_ngcontent-%COMP%]{width:100%;margin-top:30px;align-self:center}@media (max-width: 768px){.feed-page-content[_ngcontent-%COMP%]{width:95%}}.ion-palette-high-contrast[_nghost-%COMP%]   .feed-page-wrapper[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .feed-page-wrapper[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .page-content-scrollable[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .page-content-scrollable[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .feed-page-content[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .feed-page-content[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .header[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .header[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .loading[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .loading[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .error[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .error[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .no-recipes-message[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .no-recipes-message[_ngcontent-%COMP%]{background-color:#000!important;color:#fff!important}.ion-palette-high-contrast[_nghost-%COMP%]   .home-text[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .home-text[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .greeting[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .greeting[_ngcontent-%COMP%], .ion-palette-high-contrast[_nghost-%COMP%]   .question[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .question[_ngcontent-%COMP%]{color:#fff!important}.ion-palette-high-contrast[_nghost-%COMP%]   .profile-placeholder-icon[_ngcontent-%COMP%]   i.bi-image[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .profile-placeholder-icon[_ngcontent-%COMP%]   i.bi-image[_ngcontent-%COMP%]{color:#fff!important}.ion-palette-high-contrast[_nghost-%COMP%]   .categories-container[_ngcontent-%COMP%]   app-category-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   .categories-container[_ngcontent-%COMP%]   app-category-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff!important}.ion-palette-high-contrast[_nghost-%COMP%]   app-feed-menu[_ngcontent-%COMP%], .ion-palette-high-contrast   [_nghost-%COMP%]   app-feed-menu[_ngcontent-%COMP%]{background-color:#000!important;color:#fff!important}']});let n=i;return n})();export{ke as FeedPage};
